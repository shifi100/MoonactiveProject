{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\moon active\\\\Reactjs-Nodejs-MongoDB-CRUD-Example copy\\\\src\\\\PromotionList.js\";\nimport React, { Component } from 'react';\nimport { Button, ButtonGroup, Container, Table } from 'reactstrap';\nimport AppNavbar from './AppNavbar';\nimport { Link } from 'react-router-dom';\n\nclass PromotionList extends Component {\n  constructor(props) {\n    super(props);\n    this.pageNumber = 1;\n    this.state = {\n      promotionsColumns: [],\n      promotionsLines: [],\n      isLoading: true\n    };\n    this.remove = this.remove.bind(this);\n    this.create = this.create.bind(this);\n    this.firstEvent = this.firstEvent.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      isLoading: true\n    });\n    fetch('api/promotionsColumns').then(response => response.json()).then(data => this.setState({\n      promotionsColumns: data,\n      isLoading: false\n    }));\n    this.getPromotionLines();\n  }\n\n  async remove(id) {\n    await fetch(`/api/promotion/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(() => {\n      console.log(\"Remove Done!\");\n      let updatedPromotions = [...this.state.promotionsLines].filter(i => i._id !== id);\n      this.setState({\n        promotionsLines: updatedPromotions\n      });\n    });\n  }\n\n  async create(id) {\n    let promotion = [...this.state.promotionsLines].filter(i => i._id == id);\n    delete promotion[0]._id;\n    const newPromtion = {\n      promotionData: promotion[0]\n    };\n    await fetch(`/api/promotions`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newPromtion)\n    }).then(async data => {\n      console.log(\"Create Done!\");\n      console.log(data.body);\n      await fetch(`/api/promotions?page=1`).then(response => response.json()).then(data => this.setState({\n        promotionsLines: data\n      }));\n    });\n  }\n\n  firstEvent(e) {\n    var bottom = e.target.scrollHeight - e.target.scrollTop - e.target.clientHeight < 50;\n\n    if (bottom) {\n      var lastScrollTop = 0; // element should be replaced with the actual target element on which you have applied scroll, use window in case of no target element.\n      // element.addEventListener(\"scroll\", function(){ // or window.addEventListener(\"scroll\"....\n\n      var st = window.pageYOffset || document.documentElement.scrollTop; // Credits: \"https://github.com/qeremy/so/blob/master/so.dom.js#L426\"\n\n      if (st > lastScrollTop) {\n        this.pageNumber = this.pageNumber + 1;\n      } else {\n        this.pageNumber = this.pageNumber - 1;\n      }\n\n      lastScrollTop = st <= 0 ? 0 : st; // For Mobile or negative scrolling\n      // this.pageNumber = this.pageNumber+1;\n\n      this.getPromotionLines();\n    }\n  }\n\n  async getPromotionLines() {\n    await fetch(`api/promotions?page=${this.pageNumber}`).then(response => response.json()).then(data => {\n      if (this.pageNumber > 1) {\n        // let arr = [...this.state.promotionsLines, ...data];\n        // this.setState({promotionsLines: arr});\n        // } else {\n        this.setState({\n          promotionsLines: data\n        });\n      }\n    });\n  }\n\n  async generatePromotions() {\n    alert(\"still not implement\");\n  }\n\n  render() {\n    const {\n      promotionsColumns,\n      promotionsLines,\n      isLoading\n    } = this.state;\n\n    if (isLoading) {\n      return /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 14\n        }\n      }, \"Loading...\");\n    }\n\n    const promotionList = promotionsColumns;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(AppNavbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Container, {\n      fluid: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"float-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      color: \"success\",\n      onClick: () => this.generatePromotions(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }\n    }, \"Generate Promotions\")), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }, \"Promotion List\"), /*#__PURE__*/React.createElement(\"div\", {\n      onScroll: this.firstEvent,\n      className: \"promotionTable\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      className: \"mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      width: \"20%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }, \"checkbox\"), Object.keys(promotionList).map(function (value) {\n      return /*#__PURE__*/React.createElement(\"th\", {\n        width: \"20%\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 28\n        }\n      }, value);\n    }), /*#__PURE__*/React.createElement(\"th\", {\n      width: \"10%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 19\n      }\n    }, \"Actions\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    }, promotionsLines.map(item => /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      width: \"20%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 23\n      }\n    }), Object.keys(item).map(function (value) {\n      if (value != '_id') {\n        return /*#__PURE__*/React.createElement(\"td\", {\n          width: \"20%\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 34\n          }\n        }, item[value]);\n      }\n    }), /*#__PURE__*/React.createElement(ButtonGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      size: \"sm\",\n      color: \"primary\",\n      tag: Link,\n      to: \"/promotion/\" + item[\"_id\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 27\n      }\n    }, \"Edit\"), /*#__PURE__*/React.createElement(Button, {\n      size: \"sm\",\n      color: \"danger\",\n      onClick: () => this.create(item[\"_id\"]),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 27\n      }\n    }, \"Duplicate\"), /*#__PURE__*/React.createElement(Button, {\n      size: \"sm\",\n      color: \"danger\",\n      onClick: () => this.remove(item[\"_id\"]),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 27\n      }\n    }, \"Delete\")))))))));\n  }\n\n}\n\nexport default PromotionList;","map":{"version":3,"sources":["C:/Users/User/Desktop/moon active/Reactjs-Nodejs-MongoDB-CRUD-Example copy/src/PromotionList.js"],"names":["React","Component","Button","ButtonGroup","Container","Table","AppNavbar","Link","PromotionList","constructor","props","pageNumber","state","promotionsColumns","promotionsLines","isLoading","remove","bind","create","firstEvent","componentDidMount","setState","fetch","then","response","json","data","getPromotionLines","id","method","headers","console","log","updatedPromotions","filter","i","_id","promotion","newPromtion","promotionData","body","JSON","stringify","e","bottom","target","scrollHeight","scrollTop","clientHeight","lastScrollTop","st","window","pageYOffset","document","documentElement","generatePromotions","alert","render","promotionList","Object","keys","map","value","item"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Button, ButtonGroup, Container, Table } from 'reactstrap';\r\nimport AppNavbar from './AppNavbar';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass PromotionList extends Component {\r\n  \r\n  pageNumber = 1;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {promotionsColumns: [], promotionsLines: [], isLoading: true};\r\n    this.remove = this.remove.bind(this);\r\n    this.create = this.create.bind(this);\r\n    this.firstEvent = this.firstEvent.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({isLoading: true});\r\n\r\n    fetch('api/promotionsColumns')\r\n      .then(response => response.json())\r\n      .then(data => this.setState({promotionsColumns: data, isLoading: false}));\r\n\r\n    this.getPromotionLines();\r\n  }\r\n  async remove(id) {\r\n    await fetch(`/api/promotion/${id}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(() => {\r\n      console.log(\"Remove Done!\");\r\n      let updatedPromotions = [...this.state.promotionsLines].filter(i => i._id !== id);\r\n      this.setState({promotionsLines: updatedPromotions});\r\n    });\r\n  }\r\n\r\n  async create(id) {\r\n    let promotion = [...this.state.promotionsLines].filter(i => i._id == id);\r\n    delete promotion[0]._id\r\n    const newPromtion = {\r\n      promotionData: promotion[0]\r\n    }\r\n    await fetch(`/api/promotions`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(newPromtion),\r\n    }).then(async (data) => {\r\n      console.log(\"Create Done!\");\r\n      console.log(data.body)\r\n      await fetch(`/api/promotions?page=1`)\r\n      .then(response => response.json())\r\n      .then(data => this.setState({promotionsLines: data}));\r\n    });\r\n  }\r\n\r\n  firstEvent(e) {\r\n\t\tvar bottom = e.target.scrollHeight - e.target.scrollTop - e.target.clientHeight < 50;\r\n\t\tif(bottom){\r\n      var lastScrollTop = 0;\r\n\r\n// element should be replaced with the actual target element on which you have applied scroll, use window in case of no target element.\r\n// element.addEventListener(\"scroll\", function(){ // or window.addEventListener(\"scroll\"....\r\n   var st = window.pageYOffset || document.documentElement.scrollTop; // Credits: \"https://github.com/qeremy/so/blob/master/so.dom.js#L426\"\r\n   if (st > lastScrollTop){\r\n    this.pageNumber = this.pageNumber+1;\r\n   } else {\r\n    this.pageNumber = this.pageNumber-1;\r\n   }\r\n   lastScrollTop = st <= 0 ? 0 : st; // For Mobile or negative scrolling\r\n\r\n        // this.pageNumber = this.pageNumber+1;\r\n        this.getPromotionLines();\r\n      }\r\n  }\r\n\r\n  async getPromotionLines(){\r\n    await fetch(`api/promotions?page=${this.pageNumber}`)\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      if(this.pageNumber >1) {\r\n        // let arr = [...this.state.promotionsLines, ...data];\r\n        // this.setState({promotionsLines: arr});\r\n\r\n      // } else {\r\n          this.setState({promotionsLines: data})\r\n      }\r\n    \r\n    });  \r\n}\r\n  \r\n  async generatePromotions(){\r\n    alert(\"still not implement\") \r\n  }\r\n\r\n  render() {\r\n    const {promotionsColumns,promotionsLines, isLoading} = this.state;\r\n\r\n    if (isLoading) {\r\n      return <p>Loading...</p>;\r\n    }\r\n    const promotionList = promotionsColumns;\r\n\r\n    return (\r\n      <div >\r\n        <AppNavbar/>\r\n        <Container fluid>\r\n          <div className=\"float-right\">\r\n            <Button color=\"success\" onClick={() => this.generatePromotions()}>Generate Promotions</Button>\r\n          </div>\r\n          <h3>Promotion List</h3>\r\n          <div onScroll={this.firstEvent} className=\"promotionTable\">\r\n            <Table className=\"mt-4\">\r\n              <thead>\r\n                <tr>\r\n                <th width=\"20%\">checkbox</th>\r\n                  {Object.keys(promotionList).map(function(value) {\r\n                    return <th width=\"20%\">\r\n                    {value}\r\n                    </th>\r\n                  })}\r\n                  <th width=\"10%\">Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {promotionsLines.map((item) => \r\n                    <tr>\r\n                      <td width=\"20%\"></td>\r\n                      {Object.keys(item).map(function(value) {\r\n                        if(value != '_id') {\r\n                          return <td width=\"20%\" >\r\n                          {item[value]}\r\n                          </td>\r\n                        }\r\n                    })}\r\n                      <ButtonGroup>\r\n                          <Button size=\"sm\" color=\"primary\" tag={Link} to={\"/promotion/\" + item[\"_id\"]}>Edit</Button>\r\n                          <Button size=\"sm\" color=\"danger\" onClick={() => this.create(item[\"_id\"])}>Duplicate</Button>\r\n                          <Button size=\"sm\" color=\"danger\" onClick={() => this.remove(item[\"_id\"])}>Delete</Button>\r\n                      </ButtonGroup>\r\n                    </tr>\r\n                  )}\r\n              </tbody>\r\n            </Table>\r\n          </div>\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PromotionList;"]},"metadata":{},"sourceType":"module"}